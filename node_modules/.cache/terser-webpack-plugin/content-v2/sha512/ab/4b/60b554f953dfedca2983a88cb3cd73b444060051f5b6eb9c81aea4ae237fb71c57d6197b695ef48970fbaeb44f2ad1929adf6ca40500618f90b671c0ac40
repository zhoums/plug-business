{"code":"!function(e){var r={};function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:a})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var n in e)t.d(a,n,function(r){return e[r]}.bind(null,n));return a},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p=\"\",t(t.s=1)}([function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.app_version=\"1.1.5\",r.app_verSeq=2,r.default={checkPlugCookie:\"check-plug-cookie\",tbPlatform:\"https://we.taobao.com/\",backEndHost_dev:\"http://spider.ittun.com/spider\",backEndHost_pro:\"http://47.107.35.8:8281/spider\",max_interval:80,min_interval:25}},function(e,r,t){\"use strict\";var a=t(0),n=o(a),i=o(t(2));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function a(n,i){try{var o=r[n](i),s=o.value}catch(n){return void t(n)}if(!o.done)return Promise.resolve(s).then(function(e){a(\"next\",e)},function(e){a(\"throw\",e)});e(s)}(\"next\")})}}chrome.webRequest.onBeforeSendHeaders.addListener(function(e){if(\"xmlhttprequest\"===e.type){for(var r=!1,t=0;t<e.requestHeaders.length;++t)if(\"Referer\"===e.requestHeaders[t].name){r=!0,e.requestHeaders[t].value=\"https://we.taobao.com/\";break}return r||e.requestHeaders.push({name:\"Referer\",value:\"https://we.taobao.com/\"}),{requestHeaders:e.requestHeaders}}},{urls:[\"https://*.taobao.com/*\"]},[\"blocking\",\"requestHeaders\"]),versionObj(),chrome.runtime.onMessage.addListener(function(e,r,t){if(\"business\"==e.greeting&&console.log(\"lllllll\"),\"checkVersion\"==e.greeting&&versionObj().then(function(e){e.result.verSeq>a.app_verSeq&&(chrome.tabs.getSelected(null,function(r){chrome.tabs.sendRequest(r.id,{greeting:\"checkV\",res:e.result},function(e){console.log(e)})}),e.result.app_verSeq=a.app_verSeq,t(e.result))}),\"triggerConfig\"==e.greeting){console.log(\"正在获取配置数据，请稍候。。。\");var o=void 0;$.ajax({url:moli_host+\"/spider/config.wb?\"+e.head+\"&version=\"+a.app_version+\"&vs=\"+a.app_verSeq,async:!1,success:function(e){o=e}}),t(o)}\"fetchConfig\"==e.greeting&&t(null),\"spider\"==e.greeting&&e.interFaceList.forEach(function(r,t){var o,l=[],u=[];if(!Array.isArray(r.requestArgs)){var c=Object.assign({},{version:a.app_version,msg:\"request.interFaceList item is not a array - > apiUrl: \"+r.apiUrl});$.ajax({url:moli_host+\"/spider/exception.wb\",type:\"POST\",headers:e.head,data:c,success:function(e){console.log(\"has error :  +\",r.apiUrl)}})}r.requestArgs.forEach((o=s(regeneratorRuntime.mark(function t(a,n){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=Object.assign({},e.head),\"get\"===r.apiMethod?(r.pagerArg&&(a.getArgs.pageParamField={},a.getArgs.pageParamField[r.pagerArg.pageSizeArg]=r.pagerArg.defaultPageSize,a.getArgs.pageParamField[r.pagerArg.pageArg]=1,a.getArgs.pageParamField.totalField=r.pagerArg.totalField,a.getArgs.pageParamField.pageArg=r.pagerArg.pageArg),l.push(a.getArgs),Array.isArray(a.backArgs)&&a.backArgs.forEach(function(e,r){i[e]=a.getArgs[e]})):(r.pagerArg&&(a.postArgs.pageParamField={},a.postArgs.pageParamField[r.pagerArg.pageSizeArg]=r.pagerArg.defaultPageSize,a.postArgs.pageParamField[r.pagerArg.pageArg]=1,a.postArgs.pageParamField.totalField=r.pagerArg.totalField,a.postArgs.pageParamField.pageArg=r.pagerArg.pageArg),l.push(a.postArgs),Array.isArray(a.backArgs)&&a.backArgs.forEach(function(e,r){i[e]=a.postArgs[e]})),r.contentType&&(i[\"Content-Type\"]=r.contentType),u.push(i);case 4:case\"end\":return t.stop()}},t,this)})),function(e,r){return o.apply(this,arguments)})),l.forEach(function(t,o){var l=\"?\",c=null;for(var p in t)\"pageParamField\"==p?c=Object.assign({},t[p]):\"?\"===l?\"syncTime\"!==p&&(l+=p+\"=\"+t[p]):\"syncTime\"!==p&&(l+=\"&\"+p+\"=\"+t[p]);var g,f=(g=s(regeneratorRuntime.mark(function t(){var s,p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,g=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=parseInt(Math.random()*(n.default.max_interval-n.default.min_interval)+n.default.min_interval,10),c&&(1<p&&(c[c.pageArg]=p),Object.keys(c).forEach(function(e,r){if(\"totalField\"!==e&&\"pageArg\"!==e)if(\"?\"===l)l+=e+\"=\"+c[e];else{var t={},a=l.slice(l.indexOf(\"?\")+1).split(\"&\"),n=!0,i=!1,o=void 0;try{for(var s,u=a[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var p=s.value;t[p.split(\"=\")[0]]=p.split(\"=\")[1]}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}t[e]=c[e];var g=[];for(var f in t){var d=encodeURIComponent(f),v=encodeURIComponent(t[f]);g.push(d+\"=\"+v)}l=\"?\"+g.join(\"&\")}})),i.default.sleep(s),$.ajax({url:r.apiUrl+l,type:r.apiMethod||\"GET\",success:function(t){var n=r.succFlag.split(\":\");if(null==t[n[0]]){var i=Object.assign({},{version:a.app_version,msg:\"setPlugCookie.js->data[success_flag[0]](line:225)->data:\"+JSON.stringify(t)+\"   ->success_flag:\"+n+\"  ->apiUrl:\"+r.apiUrl});$.ajax({url:moli_host+\"/spider/exception.wb\",type:\"POST\",headers:e.head,data:i,success:function(e){console.log(\"has error :  +\",r.apiUrl)}})}else if(t[n[0]].toString()==$.trim(n[1])){var s={};$.each(r.fields,function(e,r){if(r.dataRoot){var a=r.dataRoot.split(\".\"),n=r.fields.split(\"|\"),i=null;if(\"entity\"===r.dataType){for(var o=0;o<a.length;o++)i=i?i[a[o]]:t[a[o]];$.each(n,function(e,r){var t=r.split(\":\"),a=i;s[t[1]]=a[t[0]]})}else if(\"list\"===r.dataType){s[r.backArg]=new Array;for(var l=null,u=0;u<a.length;u++)l=l?l[a[u]]:t[a[u]];var c=l;c&&0<c.length&&c.forEach(function(e,t){var a={};$.each(n,function(r,t){var n=t.split(\":\");a[n[1]]=e[\"\"+n[0]]}),s[r.backArg].push(a)})}else s[r.dataField]=t[r.dataField]}else s[r.dataField]=t[r.dataField]});var l=s;if(u[o][\"Content-Type\"]&&(l=JSON.stringify(l)),Object.keys(l).length&&$.ajax({url:r.serviceUrl,type:\"POST\",async:!0,tiem:2300,headers:u[o],data:l,success:function(e){}}),c){for(var p=c.totalField.split(\".\"),d=null,v=0;v<p.length;v++)d=d?d[p[v]]:t[p[v]];var h=parseInt((parseInt(d)+parseInt(c.pageSize)-1)/parseInt(c.pageSize));if(!g)for(var m=2;m<=h;m++)f(m,!0)}}}});case 4:case\"end\":return t.stop()}},t,this)})),function(){return g.apply(this,arguments)});f()})})})},function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.default={$http:function(e,r){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open(e,r,!0),n.onreadystatechange=function(){if(4==n.readyState){var e=JSON.parse(n.responseText);t(e)}},n.send()})},sleep:function(e){for(var r=new Date,t=r.getTime()+e;;)if((r=new Date).getTime()>t)return}}}]);","extractedComments":[]}